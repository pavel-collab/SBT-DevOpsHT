version: "3.7"

services:

  server:
    container_name: server
    image: python_udp_servers_image
    restart: unless-stopped
    networks:
      local_network:
        ipv4_address: 172.18.0.2

  producer:
    container_name: client
    image: python_udp_client_image
    restart: unless-stopped
    networks:
      karimullin_network:
        ipv4_address: 172.18.0.3

  ansible:
    container_name: ansible
    image: ansible_image
    command: ansible-playbook -i inventories/hosts playbook.yml
    restart: "no"
    networks:
      karimullin_network:
        ipv4_address: 172.18.0.5

networks:
  local_network:
    driver: bridge
    name: local_network
    ipam:
      config:
        - subnet: 172.18.0.0/16