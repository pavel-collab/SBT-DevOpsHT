## README

Скрипт представляет собой демона, который мониторит утилизацию дискового пространства, количество свободных inode.
При запуске скрипт форкает дочерний процесс, который начинает через заданный период собирать информацию о файловых системах на устройстве.

Собираемая информация:
* имя файловой системы
* точка монтирования
* общий размер
* занятое место
* свободное место
* размер inode
* размер свободных inode
* размер занятых inode

Вся информация записывается в .csv файл и может быть дальше обработана с применением специальных редакторов или пакетов python.
В процессе работы для контроля работы демон записвает логи в специальный файл my_daemon.log, который по умолчанию создается в /tmp.
Стандартный поток ошибок перенаправляется в файл my_daemon_err.log в каталоге /tmp.

При остановке демона файлы с логами удаляются, а их содержимое копируется в файлы с таким же названием с постфиксом .prev (также находятся в /tmp).

## Запуск

У скрипта есть 3 опции: START, STOP и STATUS:
* START -- запускает демона в фоне
* STATUS -- проверяет, существует ли запущенный в системе демон, выдает pid в случае успеха
* STOP -- останавливает демона, если он запущен

```
$./daemon.sh START
#start option
#start
#окт 06 2024 15:58:25 <host-name> Created file /tmp/Вс_06_окт_2024_15:58:25_MSK.csv
```

```
#./daemon.sh STATUS
#status option
#daemon is running
```

```
$./daemon.sh STOP
#stop option
#Daemon stop
```

## Дополнительные опции

Скрипт имеет 2 дополнительные опции:
* -p -- меняет стандартный период, с которым демон проверяет файловые системы
* -c -- меняет стандартный путь, по которому создается .csv файл (по дефолту создается в /tmp)

ВНИМАНИЕ: если вы хотите использовать дополнительные опции, используйте их ДО опций r|t|s. Если вы сначала используете,
например опцию запуска, а потом зададите путь к .csv файлу, демон запустится, но значение опции -c НЕ БУДЕТ ЗАФИКСИРОВАНО, файл
.csv будет создан по дефолтному пути.

```
$./daemon.sh -p "3m" -c "/tmp/csv_log" START
#new periode is 3m
#new csv path is /tmp/csv_log
#start option
#start
#окт 06 2024 16:05:10 <host-name> Created file /tmp/csv_log/Вс_06_окт_2024_16:05:10_MSK.csv
```